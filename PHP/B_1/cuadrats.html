<!DOCTYPE html>
<html lang="ca">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    canvas {
      border: 1px solid #000;
    }
  </style>
  <title>Joc de Quadrats</title>
</head>
<body>
  <canvas id="jocCanvas" width="500" height="400"></canvas>

  <script>
    // Variables globals
    var canvas = document.getElementById("jocCanvas");
    var ctx = canvas.getContext("2d");
    var rectangles = [];
    var rectanglesVerds = 0;

    // Funció principal del joc
    function jugarJoc(event) {
      var x = event.clientX - canvas.getBoundingClientRect().left;
      var y = event.clientY - canvas.getBoundingClientRect().top;
      var width = Math.floor(Math.random() * 80) + 40;
      var height = Math.floor(Math.random() * 80) + 40;

      // Comprovar si el nou rectangle es solapa amb un existent
      var solapament = false;
      for (var i = 0; i < rectangles.length; i++) {
        if (
          x < rectangles[i].x + rectangles[i].width &&
          x + width > rectangles[i].x &&
          y < rectangles[i].y + rectangles[i].height &&
          y + height > rectangles[i].y
        ) {
          solapament = true;
          break;
        }
      }

      // Dibuixar el rectangle i actualitzar el comptador
      ctx.fillStyle = solapament ? "red" : "green";
      ctx.fillRect(x, y, width, height);

      if (!solapament) {
        rectangles.push({ x: x, y: y, width: width, height: height });
        rectanglesVerds++;
      }

      // Comprovar si s'ha acabat el joc
      if (rectanglesVerds === 10) {
        alert("Has guanyat! Has dibuixat 10 rectangles verds.");
        resetJoc();
      }
    }

    // Funció per reiniciar el joc
    function resetJoc() {
      rectangles = [];
      rectanglesVerds = 0;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    // Afegir l'esdeveniment de clic al canvas
    canvas.addEventListener("click", jugarJoc);
  </script>
</body>
</html>
